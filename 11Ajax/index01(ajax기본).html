<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    


    <script>

        //코드 1
        // fetch('example.txt').then(function(response) {
        //     response.text().then(function(data) {
        //         console.log(data);
        //     })
        // })

        //코드 1 - 해석 fetch('example.txt') -> fetch('읽어올 파일의 주소')
        //fetch는 promise객체를 반환합니다.
        //Promise
        //1. pending - ing중
        //2. fulfilled - 성공함
        //3. reject - 거절
        
        //then함수에 콜백함수를 넣어주면, 요청이 완료되는대로, 콜백에 결과를 넣어줄지 말지
        //콜백함수? - 요청했을시 다시 답장을 받을 수 있는 함수 (성공결과를 돌려 받을 수 있게 약속된 함수)
        var promise = fetch('example.txt')
        console.log(promise);
        promise.then(callback);

        function callback (response) {
            //var a = response;
            console.log(response);
            //console.log(a);
        }
        
        //3rd
        // console.log(1);
        // fetch('example.txt').then (function (response) {
        //     console.log(2);
        //     if(response.status == 200) { //응답성공 -> 작업을 수행해도 된다.
        //         console.log(response);
        //     }

        // })

        //console.log(3);


        //4th
        fetch('example.txt')
        .then (function(response){
            if(response.status == 200){
                //response.text() ->반환은 Promise 객체
                //then절 사용 가능함

                //text() -> 문자열로 형변환
                //json() -> 오브젝트 형변환
                //formData() -> 폼객체로 형변환
                response.text().then(function(data){
                    console.log(data);
                })
            }
        });

        //5th
        // fetch('example.txt').then(function(response){
        //     return response.text();
        // })
        // .then(function(data) {
        //     return data + "hello";
        // })
        // .then(function(data){
        //     return data + "bye";
        // })

        //6th - 서로 약속된 형식의 json or xml 형식을 사용함
        fetch('example.json').then( function(response) {
            return response.json(); //json.parse를 대신함
        }).then (function (data) {
            console.log(data); //확인
        })


    </script>



</body>
</html>